@model EditTemplateModel

@{
    ViewData["Title"] = "Create a new template";   
}

<h3>@ViewData["Title"]</h3>
<div class="row my-3">
    <div class="col-1">
    </div>
    <div class="col-10">
        <form method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="mb-3">
                <label asp-for="Name"></label>
                <input class="form-control" asp-for="Name"/>
                <span class="text-danger" asp-validation-for="Name"></span>
            </div>
            <div class="mb-3">
                <label asp-for="Description"></label>
                <input class="form-control" asp-for="Description"/>
                <span class="text-danger" asp-validation-for="Description"></span>
            </div>
            <div class="mb-3">           
                <table class="table">
                    <thead>
                        <tr id="weekday_names">
                            <th>@*just to leave the space*@</th>
                            <th>@*just to leave the space*@</th>
                            <th>Mon</th>
                            <th>Tue</th>
                            <th>Wed</th>
                            <th>Thu</th>
                            <th>Fri</th>
                            <th>Sat</th>
                            <th>Sun</th>
                        </tr>
                        <tr id="weekday_checkboxes">
                            <th>@*just to leave the space*@</th>
                            <th>@*just to leave the space*@</th>
                            <th><input id="select_all_dow0" type="checkbox" onchange="selectAllCheckboxes('dow0')"/></th>                   
                            <th><input id="select_all_dow1" type="checkbox" onchange="selectAllCheckboxes('dow1')"/></th>                  
                            <th><input id="select_all_dow2" type="checkbox" onchange="selectAllCheckboxes('dow2')"/></th>                   
                            <th><input id="select_all_dow3" type="checkbox" onchange="selectAllCheckboxes('dow3')"/></th>                 
                            <th><input id="select_all_dow4" type="checkbox" onchange="selectAllCheckboxes('dow4')"/></th>                   
                            <th><input id="select_all_dow5" type="checkbox" onchange="selectAllCheckboxes('dow5')"/></th>                  
                            <th><input id="select_all_dow6" type="checkbox" onchange="selectAllCheckboxes('dow6')"/></th>
                        </tr>
                    </thead>
                    <tbody>
                        @for(int hour = 0; hour < 24; hour++)
                        {
                            <tr>
                                @{
                                    string displayHour = $"{hour:d2}:00 - {hour + 1:d2}:00";
                                }
                                <td>@displayHour</td>
                                <td><input id="select_all_@hour" type="checkbox" onchange="selectAllCheckboxes('@hour')" /></td>
                                @for(int dayOfWeek = 0; dayOfWeek < 7; dayOfWeek++)
                                {
                                    @*<partial name="_TemplateRowPartial" model="new TemplateRowModel(dayOfWeek, hour)"/>*@
                                    <td>
                                        @{
                                            string dowClass = "dow" + dayOfWeek;
                                            int checkBoxId = hour * 7 + dayOfWeek;
                                        }
	                                    <input type="checkbox" id="@checkBoxId" class="@dowClass @hour" name="TemplateEntries" value="@checkBoxId"/>
                                    </td>
                                }
                            </tr>
                        }                                 
                    </tbody>
                </table>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>   
</div>

@section Scripts{
    <script>
        function selectAllCheckboxes(dayOfWeek){
            var checkBoxes = document.getElementsByClassName(dayOfWeek);
            var isChecked = document.getElementById('select_all_' + dayOfWeek).checked;

            for(var i=0;i < checkBoxes.length;i++){
                checkBoxes[i].checked = isChecked;
            }        
        }
    </script>

    <partial name="_ValidationScriptsPartial" />
}

